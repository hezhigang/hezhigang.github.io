<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>LeetCode解题日志 | Stay Hungry. Stay Foolish.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Algorithms2. Add Two Numbers用链表模拟十进制加法运算，linked list有点犯晕，在Eclipse IDE上调试了半天才跑通了，只会瞎用框架和库的人算法方面果然是菜鸟。 一开始出来的结果顺序老是逆着。在网上找了个Function to reverse the linked list，incline到自己那代码里，最后总算在LeetCode上跑过了。 Java1234">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode解题日志">
<meta property="og:url" content="https://hezhigang.github.io/2018/06/30/LeetCode-Solve-Diary/index.html">
<meta property="og:site_name" content="Stay Hungry. Stay Foolish.">
<meta property="og:description" content="Algorithms2. Add Two Numbers用链表模拟十进制加法运算，linked list有点犯晕，在Eclipse IDE上调试了半天才跑通了，只会瞎用框架和库的人算法方面果然是菜鸟。 一开始出来的结果顺序老是逆着。在网上找了个Function to reverse the linked list，incline到自己那代码里，最后总算在LeetCode上跑过了。 Java1234">
<meta property="og:locale">
<meta property="article:published_time" content="2018-06-30T11:20:59.000Z">
<meta property="article:modified_time" content="2025-08-12T16:18:09.441Z">
<meta property="article:author" content="hezhigang">
<meta property="article:tag" content="LeetCode">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Stay Hungry. Stay Foolish." type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Stay Hungry. Stay Foolish.</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hezhigang.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-LeetCode-Solve-Diary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/30/LeetCode-Solve-Diary/" class="article-date">
  <time datetime="2018-06-30T11:20:59.000Z" itemprop="datePublished">2018-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      LeetCode解题日志
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h1><h2 id="2-Add-Two-Numbers"><a href="#2-Add-Two-Numbers" class="headerlink" title="2. Add Two Numbers"></a>2. Add Two Numbers</h2><p>用链表模拟十进制加法运算，linked list有点犯晕，在Eclipse IDE上调试了半天才跑通了，只会瞎用框架和库的人算法方面果然是菜鸟。</p>
<p>一开始出来的结果顺序老是逆着。在网上找了个Function to reverse the linked list，incline到自己那代码里，最后总算在LeetCode上跑过了。</p>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">    	<span class="type">ListNode</span> <span class="variable">node1</span> <span class="operator">=</span> l1, node2 = l2;</span><br><span class="line">    	<span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> <span class="literal">null</span>, tmpNode = <span class="literal">null</span>;</span><br><span class="line">    	<span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    	<span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">while</span> (node1 != <span class="literal">null</span> || node2!=<span class="literal">null</span>) &#123;</span><br><span class="line">			node = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">			sum = (node1!=<span class="literal">null</span>?node1.val:<span class="number">0</span>) + (node2!=<span class="literal">null</span>?node2.val:<span class="number">0</span>);</span><br><span class="line">			<span class="keyword">if</span> (b) sum++;</span><br><span class="line">			node.val = sum&lt;<span class="number">10</span>?sum:sum%<span class="number">10</span>;</span><br><span class="line">			b = sum&gt;=<span class="number">10</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">if</span> (tmpNode!=<span class="literal">null</span>)</span><br><span class="line">				node.next = tmpNode;</span><br><span class="line">			<span class="keyword">if</span> (node1!=<span class="literal">null</span>)</span><br><span class="line">			  node1 = node1.next;</span><br><span class="line">			<span class="keyword">if</span> (node2!=<span class="literal">null</span>)</span><br><span class="line">			  node2 = node2.next;</span><br><span class="line">			tmpNode = node;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (b) &#123;</span><br><span class="line">			<span class="type">ListNode</span> <span class="variable">node3</span> <span class="operator">=</span> node;</span><br><span class="line">			node = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">1</span>);</span><br><span class="line">			node.next = node3;</span><br><span class="line">		&#125;</span><br><span class="line">    	<span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    	<span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> node;</span><br><span class="line">    	<span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">            next = current.next;</span><br><span class="line">            current.next = prev;</span><br><span class="line">            prev = current;</span><br><span class="line">            current = next;</span><br><span class="line">        &#125;</span><br><span class="line">        node = prev;</span><br><span class="line">        <span class="keyword">return</span> node;        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">	<span class="type">int</span> val;</span><br><span class="line">	ListNode next;</span><br><span class="line">	ListNode(<span class="type">int</span> x) &#123;</span><br><span class="line">		val = x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail"><a href="#Submission-Detail" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>1562 &#x2F; 1562 test cases passed.</li>
</ul>
<p>写完了过上一段时间，又忘了是怎么做对的，在IDE上debug出来的代码，可能做得比较勉强。</p>
<h2 id="1-Two-Sum"><a href="#1-Two-Sum" class="headerlink" title="1. Two Sum"></a>1. Two Sum</h2><h3 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h3><h4 id="Brute-Force"><a href="#Brute-Force" class="headerlink" title="Brute Force"></a>Brute Force</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span>[] idxArr = &#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) </span><br><span class="line">        	<span class="keyword">for</span>(<span class="type">int</span> j=nums.length-<span class="number">1</span>;j&gt;i;j--) &#123;</span><br><span class="line">        		<span class="keyword">if</span> (nums[j]+nums[i]==target) &#123;</span><br><span class="line">        			idxArr[<span class="number">0</span>] = i;</span><br><span class="line">        			idxArr[<span class="number">1</span>] = j;</span><br><span class="line">        			<span class="keyword">return</span> idxArr;</span><br><span class="line">        		&#125;</span><br><span class="line">        	&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> idxArr;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Submission-Detail-1"><a href="#Submission-Detail-1" class="headerlink" title="Submission Detail"></a>Submission Detail</h5><ul>
<li>20 &#x2F; 20 test cases passed.</li>
<li>Your runtime beats 30.47 % of java submissions.</li>
</ul>
<h3 id="Hash-Table"><a href="#Hash-Table" class="headerlink" title="Hash Table"></a>Hash Table</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">		Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Integer&gt;();</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">complement</span> <span class="operator">=</span> target - nums[i];</span><br><span class="line">			<span class="keyword">if</span> (map.containsKey(complement)) &#123;</span><br><span class="line">				a = i;</span><br><span class="line">				b = map.get(complement);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				map.put(nums[i], i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;a, b&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-2"><a href="#Submission-Detail-2" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>29 &#x2F; 29 test cases passed.</li>
<li>Runtime: 2 ms, faster than 72.04% of Java online submissions for Two Sum.</li>
<li>Memory Usage: 39.2 MB, less than 98.23% of Java online submissions for Two Sum.</li>
</ul>
<hr>
<h1 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h1><h2 id="175-Combine-Two-Tables"><a href="#175-Combine-Two-Tables" class="headerlink" title="175. Combine Two Tables"></a>175. Combine Two Tables</h2><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> p.FirstName FirstName,p.LastName LastName,a.City City, a.State State </span><br><span class="line"><span class="keyword">from</span> Person p </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> Address a <span class="keyword">on</span> p.PersonId<span class="operator">=</span>a.PersonId</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-3"><a href="#Submission-Detail-3" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>7 &#x2F; 7 test cases passed.</li>
<li>Your runtime beats 84.70 % of mysql submissions.</li>
</ul>
<h3 id="Transact-SQL"><a href="#Transact-SQL" class="headerlink" title="Transact-SQL"></a>Transact-SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> P.firstName <span class="keyword">AS</span> <span class="string">&#x27;firstName&#x27;</span>, P.lastName <span class="keyword">AS</span> <span class="string">&#x27;lastName&#x27;</span>, A.city <span class="keyword">AS</span> <span class="string">&#x27;city&#x27;</span>, A.state <span class="keyword">AS</span> <span class="string">&#x27;state&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span> Person <span class="keyword">AS</span> P </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Address <span class="keyword">AS</span> A <span class="keyword">ON</span> A.personId <span class="operator">=</span> P.personId</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-4"><a href="#Submission-Detail-4" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>8 &#x2F; 8 test cases passed.</li>
<li>Your runtime beats 44.40 % of mssql submissions.</li>
</ul>
<h2 id="176-Second-Highest-Salary"><a href="#176-Second-Highest-Salary" class="headerlink" title="176. Second Highest Salary"></a>176. Second Highest Salary</h2><h3 id="mysql-1"><a href="#mysql-1" class="headerlink" title="mysql"></a>mysql</h3><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> IF(<span class="built_in">count</span>(<span class="keyword">distinct</span> Salary)<span class="operator">&gt;</span><span class="number">1</span>,<span class="built_in">min</span>(t.Salary),<span class="keyword">null</span>) SecondHighestSalary <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> Salary <span class="keyword">from</span> Employee <span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span> limit <span class="number">2</span>) t</span><br></pre></td></tr></table></figure>

<h5 id="Submission-Detail-5"><a href="#Submission-Detail-5" class="headerlink" title="Submission Detail"></a>Submission Detail</h5><ul>
<li>7 &#x2F; 7 test cases passed.</li>
<li>Your runtime beats 90.90 % of mysql submissions.</li>
</ul>
<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> Salary <span class="keyword">from</span> Employee <span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span> limit <span class="number">1</span>,<span class="number">1</span></span><br><span class="line">) <span class="keyword">AS</span> SecondHighestSalary</span><br></pre></td></tr></table></figure>

<h5 id="Submission-Detail-6"><a href="#Submission-Detail-6" class="headerlink" title="Submission Detail"></a>Submission Detail</h5><ul>
<li>7 &#x2F; 7 test cases passed.</li>
<li>Your runtime beats 88.73 % of mysql submissions.</li>
</ul>
<h3 id="Transact-SQL-1"><a href="#Transact-SQL-1" class="headerlink" title="Transact-SQL"></a>Transact-SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="built_in">COUNT</span>(V.salary) <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="built_in">MIN</span>(V.salary) </span><br><span class="line"><span class="keyword">ELSE</span> <span class="keyword">NULL</span> </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> <span class="string">&#x27;SecondHighestSalary&#x27;</span> <span class="keyword">FROM</span> </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span> TOP <span class="number">2</span> SA.salary <span class="keyword">FROM</span> </span><br><span class="line">    (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> EM.salary </span><br><span class="line">    <span class="keyword">FROM</span> Employee <span class="keyword">AS</span> EM</span><br><span class="line">    ) <span class="keyword">AS</span> SA </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> SA.salary <span class="keyword">DESC</span></span><br><span class="line">) <span class="keyword">AS</span> V</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-7"><a href="#Submission-Detail-7" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>8 &#x2F; 8 test cases passed.</li>
<li>Runtime: 603 ms, faster than 85.83% of MS SQL Server online submissions for Second Highest Salary.</li>
<li>Memory Usage: 0B, less than 100.00% of MS SQL Server online submissions for Second Highest Salary.</li>
</ul>
<h2 id="177-Nth-Highest-Salary"><a href="#177-Nth-Highest-Salary" class="headerlink" title="177. Nth Highest Salary"></a>177. Nth Highest Salary</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="type">INT</span>) <span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> fromRow <span class="type">INT</span>;</span><br><span class="line">  <span class="keyword">SET</span> fromRow <span class="operator">=</span> N<span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">RETURN</span> (<span class="keyword">select</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> Salary <span class="keyword">from</span> Employee <span class="keyword">order</span> <span class="keyword">by</span> Salary <span class="keyword">desc</span> limit <span class="number">1</span> <span class="keyword">offset</span> fromRow));</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-8"><a href="#Submission-Detail-8" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>14 &#x2F; 14 test cases passed.</li>
<li>Your runtime beats 86.66 % of mysql submissions.</li>
</ul>
<h2 id="178-Rank-Scores"><a href="#178-Rank-Scores" class="headerlink" title="178. Rank Scores"></a>178. Rank Scores</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.Score,b.`Rank` <span class="keyword">from</span> Scores a,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.Score,(<span class="variable">@row</span>_number:<span class="operator">=</span><span class="variable">@row</span>_number<span class="operator">+</span><span class="number">1</span>) <span class="keyword">as</span> `Rank` <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> Score <span class="keyword">from</span> Scores <span class="keyword">order</span> <span class="keyword">by</span> Score <span class="keyword">desc</span></span><br><span class="line">) t,(<span class="keyword">SELECT</span> <span class="variable">@row</span>_number:<span class="operator">=</span><span class="number">0</span>) t2</span><br><span class="line">) b</span><br><span class="line"><span class="keyword">where</span> a.Score<span class="operator">=</span>b.Score </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.Score <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-9"><a href="#Submission-Detail-9" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>10 &#x2F; 10 test cases passed.</li>
<li>Your runtime beats 98.24 % of mysql submissions.</li>
</ul>
<h2 id="181-Employees-Earning-More-Than-Their-Managers"><a href="#181-Employees-Earning-More-Than-Their-Managers" class="headerlink" title="181. Employees Earning More Than Their Managers"></a>181. Employees Earning More Than Their Managers</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.Name <span class="keyword">as</span> Employee <span class="keyword">from</span> Employee t <span class="keyword">where</span> t.Salary<span class="operator">&gt;</span>(<span class="keyword">select</span> e.Salary <span class="keyword">from</span> Employee e <span class="keyword">where</span> e.Id<span class="operator">=</span>t.ManagerId)</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-10"><a href="#Submission-Detail-10" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>14 &#x2F; 14 test cases passed.</li>
<li>Your runtime beats 39.24 % of mysql submissions.</li>
</ul>
<h2 id="182-Duplicate-Emails"><a href="#182-Duplicate-Emails" class="headerlink" title="182. Duplicate Emails"></a>182. Duplicate Emails</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.Email <span class="keyword">as</span> Email <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> Email,<span class="built_in">count</span>(Email) <span class="keyword">from</span> Person <span class="keyword">group</span> <span class="keyword">by</span> Email <span class="keyword">having</span> <span class="built_in">count</span>(Email)<span class="operator">&gt;</span><span class="number">1</span>) t</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-11"><a href="#Submission-Detail-11" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>15 &#x2F; 15 test cases passed.</li>
<li>Your runtime beats 76.83 % of mysql submissions.</li>
</ul>
<h2 id="183-Customers-Who-Never-Order"><a href="#183-Customers-Who-Never-Order" class="headerlink" title="183. Customers Who Never Order"></a>183. Customers Who Never Order</h2><h3 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.Name <span class="keyword">as</span> Customers <span class="keyword">from</span> Customers c <span class="keyword">where</span> c.Id <span class="keyword">not</span> <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="keyword">distinct</span> o.CustomerId <span class="keyword">from</span> Orders o)</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-12"><a href="#Submission-Detail-12" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>12 &#x2F; 12 test cases passed.</li>
<li>Your runtime beats 84.65 % of mysql submissions.</li>
</ul>
<h3 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.Name <span class="keyword">as</span> Customers <span class="keyword">from</span> Customers c</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> Orders o <span class="keyword">on</span> c.Id<span class="operator">=</span>o.CustomerId </span><br><span class="line"><span class="keyword">where</span> o.Id <span class="keyword">is</span> <span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-13"><a href="#Submission-Detail-13" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>12 &#x2F; 12 test cases passed.</li>
<li>Your runtime beats 83.24 % of mysql submissions</li>
</ul>
<h2 id="196-Delete-Duplicate-Emails"><a href="#196-Delete-Duplicate-Emails" class="headerlink" title="196. Delete Duplicate Emails"></a>196. Delete Duplicate Emails</h2><p>虽然难度标为Easy，居然也被卡住了，还以为要用临时表，google关键字 <code>mysql delete duplicate rows keep one</code>搜到<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4685173/delete-all-duplicate-rows-except-for-one-in-mysql">Delete all Duplicate Rows except for One in MySQL? [duplicate]</a>，原来是自己未完全理解mysql的delete关于多表删除的语法。</p>
<pre><code>DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
tbl_name[.*] [, tbl_name[.*]] ...
FROM table_references
[WHERE where_condition]
</code></pre>
<p>Or:</p>
<pre><code>DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
FROM tbl_name[.*] [, tbl_name[.*]] ...
USING table_references
[WHERE where_condition]
</code></pre>
<p>看来这种技术问题，google+stack overflow 一点就破，自己坚持独立思考在那里死磕纯属浪费时间。</p>
<h3 id="1-2"><a href="#1-2" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> p <span class="keyword">from</span> Person <span class="keyword">as</span> p, Person <span class="keyword">as</span> t <span class="keyword">where</span> p.Id<span class="operator">&gt;</span>t.Id <span class="keyword">and</span> p.Email<span class="operator">=</span>t.Email;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-14"><a href="#Submission-Detail-14" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>22 &#x2F; 22 test cases passed.</li>
<li>Your runtime beats 18.50 % of mysql submissions.</li>
</ul>
<h3 id="2-2"><a href="#2-2" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> p <span class="keyword">from</span> Person <span class="keyword">as</span> p, Person <span class="keyword">as</span> t <span class="keyword">where</span> p.Email<span class="operator">=</span>t.Email <span class="keyword">and</span> p.Id<span class="operator">&gt;</span>t.Id;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-15"><a href="#Submission-Detail-15" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>22 &#x2F; 22 test cases passed.</li>
<li>Your runtime beats 83.82 % of mysql submissions.</li>
</ul>
<h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> p <span class="keyword">from</span> Person <span class="keyword">as</span> p <span class="keyword">inner</span> <span class="keyword">join</span> Person <span class="keyword">as</span> t <span class="keyword">where</span> p.Email<span class="operator">=</span>t.Email <span class="keyword">and</span> p.Id<span class="operator">&gt;</span>t.Id;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-16"><a href="#Submission-Detail-16" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>22 &#x2F; 22 test cases passed.</li>
<li>Your runtime beats 80.14 % of mysql submissions.</li>
</ul>
<h2 id="180-Consecutive-Numbers"><a href="#180-Consecutive-Numbers" class="headerlink" title="180. Consecutive Numbers"></a>180. Consecutive Numbers</h2><p>被卡了好几天，百思不得其解，又开始怀疑是不是select还不足以，难道要用到游标与临时表之类，再琢磨下去也是浪费时间，遇到什么问题，就去问google，尤其是这种自己不会别人会的技术问题，搜 mysql consecutive queries 定位到 <a target="_blank" rel="noopener" href="https://dba.stackexchange.com/questions/189013/mysql-query-for-3-consecutive-integers-between-records">MySQL query for 3 consecutive integers between records</a>，冥思苦想就是想不对路，一看到人家的解就恍然大悟，自己怎么会想不到这一点，看来自己的sql还是需要外部启发，没有点拨，自己就迷失在思维定势里了。</p>
<p>不过这题有点让人犯糊涂，如果id不连续呢？那是不是还得用计算列row_num?反正题意是id连续</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> t.Num <span class="keyword">as</span> ConsecutiveNums <span class="keyword">from</span> Logs t</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> Logs x <span class="keyword">where</span> x.Id<span class="number">-1</span><span class="operator">=</span>t.Id <span class="keyword">and</span> x.Num<span class="operator">=</span>t.Num) <span class="keyword">and</span> </span><br><span class="line"><span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> Logs x <span class="keyword">where</span> x.Id<span class="operator">+</span><span class="number">1</span><span class="operator">=</span>t.Id <span class="keyword">and</span> x.Num<span class="operator">=</span>t.Num);</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-17"><a href="#Submission-Detail-17" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>21 &#x2F; 21 test cases passed.</li>
<li>Your runtime beats 50.90 % of mysql submissions.</li>
</ul>
<h2 id="185-Department-Top-Three-Salaries"><a href="#185-Department-Top-Three-Salaries" class="headerlink" title="185. Department Top Three Salaries"></a>185. Department Top Three Salaries</h2><p>琢磨了好几天也没思路，问题的难度标为hard，难道用select无法实现？难道要用到cursor与临时表？最后google -&gt; mysql top 3 per group在<a target="_blank" rel="noopener" href="https://stackoverflow.com/">Stack Overflow</a>找到<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12113699/get-top-n-records-for-each-group-of-grouped-results">Get top n records for each group of grouped results</a>，思路顿开，原来还是要用到查询结果序号的计算列，T-SQL与PL&#x2F;SQL都有Rank()函数，mysql可以用变量模拟实现，在<a target="_blank" rel="noopener" href="https://leetcode.com/problems/rank-scores/description/">178. Rank Scores</a>中已经用到，只是本题需要用到两个列，需要用两个@变量。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department,e.Name <span class="keyword">as</span> Employee,b.Salary <span class="keyword">as</span> Salary <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> a.DepartmentId,a.Salary <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.DepartmentId,t.Salary,(<span class="variable">@num</span>:<span class="operator">=</span>if(<span class="variable">@deptId</span> <span class="operator">=</span> t.DepartmentId, <span class="variable">@num</span> <span class="operator">+</span><span class="number">1</span>, if(<span class="variable">@deptId</span> :<span class="operator">=</span> t.DepartmentId, <span class="number">1</span>, <span class="number">1</span>))) <span class="keyword">as</span> row_number <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> DepartmentId,Salary <span class="keyword">from</span> Employee</span><br><span class="line">) t </span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> (<span class="keyword">select</span> <span class="variable">@num</span>:<span class="operator">=</span><span class="number">0</span>, <span class="variable">@deptId</span>:<span class="operator">=</span><span class="keyword">null</span>) c  </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t.DepartmentId,t.Salary <span class="keyword">desc</span></span><br><span class="line">) a </span><br><span class="line"><span class="keyword">where</span> a.row_number<span class="operator">&lt;=</span><span class="number">3</span></span><br><span class="line">) b </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> Employee e <span class="keyword">using</span>(DepartmentId,Salary) </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Department d <span class="keyword">on</span> e.DepartmentId<span class="operator">=</span>d.Id </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> b.DepartmentId,b.Salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-18"><a href="#Submission-Detail-18" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>20 &#x2F; 20 test cases passed.</li>
<li>Your runtime beats 98.70 % of mysql submissions.</li>
</ul>
<h2 id="184-Department-Highest-Salary"><a href="#184-Department-Highest-Salary" class="headerlink" title="184. Department Highest Salary"></a>184. Department Highest Salary</h2><p>也蒙了几天，group by得到部门max salary是显然的，怎么得到员工姓名？发现用部门id与salary同时作为join的条件就ok了，用using连接从句显得更自然。</p>
<h3 id="1-3"><a href="#1-3" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department,e.Name <span class="keyword">as</span> Employee,t.Salary <span class="keyword">from</span> Department d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> (<span class="keyword">select</span> DepartmentId,<span class="built_in">Max</span>(Salary) <span class="keyword">as</span> Salary <span class="keyword">from</span> Employee <span class="keyword">group</span> <span class="keyword">by</span> DepartmentId) t <span class="keyword">on</span> t.DepartmentId<span class="operator">=</span>d.Id </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Employee e <span class="keyword">on</span> t.Salary<span class="operator">=</span>e.Salary <span class="keyword">and</span> t.DepartmentId<span class="operator">=</span>e.DepartmentId </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t.Salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-19"><a href="#Submission-Detail-19" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>15 &#x2F; 15 test cases passed.</li>
<li>Your runtime beats 77.87 % of mysql submissions.</li>
</ul>
<h3 id="2-3"><a href="#2-3" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department,e.Name <span class="keyword">as</span> Employee,t.Salary <span class="keyword">from</span> Department d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> (<span class="keyword">select</span> DepartmentId,<span class="built_in">Max</span>(Salary) <span class="keyword">as</span> Salary <span class="keyword">from</span> Employee <span class="keyword">group</span> <span class="keyword">by</span> DepartmentId) t <span class="keyword">on</span> d.Id<span class="operator">=</span>t.DepartmentId </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Employee e <span class="keyword">on</span> e.DepartmentId<span class="operator">=</span>t.DepartmentId <span class="keyword">and</span> e.Salary<span class="operator">=</span>t.Salary </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t.Salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-20"><a href="#Submission-Detail-20" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>15 &#x2F; 15 test cases passed.</li>
<li>Your runtime beats 87.87 % of mysql submissions.</li>
</ul>
<h3 id="3-1"><a href="#3-1" class="headerlink" title="3"></a>3</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.Name <span class="keyword">as</span> Department,e.Name <span class="keyword">as</span> Employee,t.Salary <span class="keyword">from</span> Department d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> (<span class="keyword">select</span> DepartmentId,<span class="built_in">Max</span>(Salary) <span class="keyword">as</span> Salary <span class="keyword">from</span> Employee <span class="keyword">group</span> <span class="keyword">by</span> DepartmentId) t <span class="keyword">on</span> d.Id<span class="operator">=</span>t.DepartmentId </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> Employee e <span class="keyword">using</span>(DepartmentId,Salary) </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> t.Salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-21"><a href="#Submission-Detail-21" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>15 &#x2F; 15 test cases passed.</li>
<li>Your runtime beats 91.84 % of mysql submissions.</li>
</ul>
<h2 id="197-Rising-Temperature"><a href="#197-Rising-Temperature" class="headerlink" title="197. Rising Temperature"></a>197. Rising Temperature</h2><p>这题果然Easy, 不过自己还是在mysql手册里查了下函数DATEDIFF(expr1,expr2)，不用google就ok了，在LeetCode第一次就通过了，此题的问题结构好像跟 180. Consecutive Numbers 类似。</p>
<p>想到人家刷LeetCode都是光用脑子调代码直接在网页上Run，而自己离不开IDE与数据库运行环境，人家那叫刷题，自己只是在做题。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> w.Id <span class="keyword">from</span> Weather w, Weather t <span class="keyword">where</span> datediff(w.RecordDate,t.RecordDate)<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> w.Temperature<span class="operator">&gt;</span>t.Temperature;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-22"><a href="#Submission-Detail-22" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>14 &#x2F; 14 test cases passed.</li>
<li>Your runtime beats 90.59 % of mysql submissions.</li>
</ul>
<h2 id="262-Trips-and-Users"><a href="#262-Trips-and-Users" class="headerlink" title="262. Trips and Users"></a>262. Trips and Users</h2><p>这题又耗了两天，一开始没看懂题意，虽然不能迅速做不出，倒也没怎么被卡住，不过免不了又要在纸上比划一下，还有在mysql上一遍遍执行验证想法，也没啥可以google的，提交Leetcode第一遍就通过了，没想到。自己对left outer join与right outer join的理解似乎有误，这两者是有区别的，自己之前似乎以为这两者是对称的。</p>
<h3 id="1-4"><a href="#1-4" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> b.Request_at <span class="keyword">as</span> <span class="keyword">Day</span>,round(IFNull(a.cancel_num,<span class="number">0</span>)<span class="operator">/</span>b.total_num,<span class="number">2</span>) <span class="keyword">as</span> `Cancellation Rate` <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.Request_at,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> cancel_num <span class="keyword">from</span> Trips t </span><br><span class="line"><span class="keyword">where</span> t.Client_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;client&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Driver_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;driver&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Status <span class="keyword">in</span> (<span class="string">&#x27;cancelled_by_driver&#x27;</span>,<span class="string">&#x27;cancelled_by_client&#x27;</span>) <span class="keyword">and</span> t.Request_at <span class="keyword">between</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-01&#x27;</span> <span class="keyword">and</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-03&#x27;</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> t.Request_at</span><br><span class="line">) a <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.Request_at,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> total_num <span class="keyword">from</span> Trips t </span><br><span class="line"><span class="keyword">where</span> t.Client_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;client&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Driver_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;driver&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> t.Request_at <span class="keyword">between</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-01&#x27;</span> <span class="keyword">and</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-03&#x27;</span>  </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> t.Request_at</span><br><span class="line">) b <span class="keyword">on</span> b.Request_at<span class="operator">=</span>a.Request_at;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-23"><a href="#Submission-Detail-23" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>9 &#x2F; 9 test cases passed.</li>
<li>Your runtime beats 82.92 % of mysql submissions.</li>
</ul>
<h3 id="2-4"><a href="#2-4" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.Request_at <span class="keyword">as</span> <span class="keyword">Day</span>,round(IFNull(b.cancel_num,<span class="number">0</span>)<span class="operator">/</span>a.total_num,<span class="number">2</span>) <span class="keyword">as</span> `Cancellation Rate` <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.Request_at,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> total_num <span class="keyword">from</span> Trips t </span><br><span class="line"><span class="keyword">where</span> t.Client_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;client&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Driver_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;driver&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> t.Request_at <span class="keyword">between</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-01&#x27;</span> <span class="keyword">and</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-03&#x27;</span>  </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> t.Request_at</span><br><span class="line">) a <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t.Request_at,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> cancel_num <span class="keyword">from</span> Trips t </span><br><span class="line"><span class="keyword">where</span> t.Client_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;client&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Driver_Id <span class="keyword">in</span> (<span class="keyword">select</span> Users_Id <span class="keyword">from</span> Users <span class="keyword">where</span> Role<span class="operator">=</span><span class="string">&#x27;driver&#x27;</span> <span class="keyword">and</span> Banned<span class="operator">=</span><span class="string">&#x27;No&#x27;</span>) <span class="keyword">and</span> </span><br><span class="line">t.Status <span class="keyword">in</span> (<span class="string">&#x27;cancelled_by_driver&#x27;</span>,<span class="string">&#x27;cancelled_by_client&#x27;</span>) <span class="keyword">and</span> t.Request_at <span class="keyword">between</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-01&#x27;</span> <span class="keyword">and</span> <span class="type">DATE</span> <span class="string">&#x27;2013-10-03&#x27;</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> t.Request_at</span><br><span class="line">) b <span class="keyword">on</span> b.Request_at<span class="operator">=</span>a.Request_at;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-24"><a href="#Submission-Detail-24" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>9 &#x2F; 9 test cases passed.</li>
<li>Your runtime beats 61.34 % of mysql submissions.</li>
</ul>
<h2 id="595-Big-Countries"><a href="#595-Big-Countries" class="headerlink" title="595. Big Countries"></a>595. Big Countries</h2><p>这题确实Easy，or条件或用据说性能更好的 union (Set operations)</p>
<h3 id="1-5"><a href="#1-5" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name,population,area <span class="keyword">from</span> World <span class="keyword">where</span> area<span class="operator">&gt;</span><span class="number">3000000</span> <span class="keyword">or</span> population<span class="operator">&gt;</span><span class="number">25000000</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-25"><a href="#Submission-Detail-25" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>4 &#x2F; 4 test cases passed.</li>
</ul>
<h3 id="2-5"><a href="#2-5" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name,population,area <span class="keyword">from</span> World <span class="keyword">where</span> area<span class="operator">&gt;</span><span class="number">3000000</span> </span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> name,population,area <span class="keyword">from</span> World <span class="keyword">where</span> population<span class="operator">&gt;</span><span class="number">25000000</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-26"><a href="#Submission-Detail-26" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>4 &#x2F; 4 test cases passed.</li>
</ul>
<h2 id="596-Classes-More-Than-5-Students"><a href="#596-Classes-More-Than-5-Students" class="headerlink" title="596. Classes More Than 5 Students"></a>596. Classes More Than 5 Students</h2><p>这题也Easy，group by + having子句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.`class` <span class="keyword">as</span> `class` <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> `class`,<span class="built_in">count</span>(<span class="keyword">distinct</span> student) <span class="keyword">as</span> n <span class="keyword">from</span> courses <span class="keyword">group</span> <span class="keyword">by</span> `class` <span class="keyword">having</span> n<span class="operator">&gt;=</span><span class="number">5</span></span><br><span class="line">) t;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-27"><a href="#Submission-Detail-27" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>9 &#x2F; 9 test cases passed.</li>
</ul>
<h2 id="601-Human-Traffic-of-Stadium"><a href="#601-Human-Traffic-of-Stadium" class="headerlink" title="601. Human Traffic of Stadium"></a>601. Human Traffic of Stadium</h2><p>这题又被卡了好几天，google也没搜到什么直接的线索，PL&#x2F;SQL与T-SQL有分析函数ROW_NUMBER(), RANK(), and DENSE_RANK()，还以为需要mysql模拟这种功能。</p>
<p>卡在这一步里</p>
<pre><code>select s.* from stadium s where s.people&gt;=100 
and exists(select 1 from stadium t2 where t2.people&gt;=100 and t2.`date`=DATE_SUB(s.`date`,INTERVAL 1 DAY)) 
and exists(select 1 from stadium t3 where t3.people&gt;=100 and t3.`date`=DATE_ADD(s.`date`,INTERVAL 1 DAY));
</code></pre>
<p>最后发现用 join + union就好了，显示执行效率不高，可能还有更好的写法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> x.<span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> s.<span class="operator">*</span> <span class="keyword">from</span> stadium s <span class="keyword">where</span> s.people<span class="operator">&gt;=</span><span class="number">100</span>) a,</span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> s.<span class="operator">*</span> <span class="keyword">from</span> stadium s <span class="keyword">where</span> s.people<span class="operator">&gt;=</span><span class="number">100</span> </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t2 <span class="keyword">where</span> t2.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t2.id<span class="operator">=</span>s.id<span class="number">-1</span>) </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t3 <span class="keyword">where</span> t3.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t3.id<span class="operator">=</span>s.id<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line">) b </span><br><span class="line"><span class="keyword">where</span> a.id<span class="operator">=</span>b.id<span class="number">-1</span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.<span class="operator">*</span> <span class="keyword">from</span> stadium s <span class="keyword">where</span> s.people<span class="operator">&gt;=</span><span class="number">100</span> </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t2 <span class="keyword">where</span> t2.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t2.id<span class="operator">=</span>s.id<span class="number">-1</span>) </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t3 <span class="keyword">where</span> t3.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t3.id<span class="operator">=</span>s.id<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> c.<span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> s.<span class="operator">*</span> <span class="keyword">from</span> stadium s <span class="keyword">where</span> s.people<span class="operator">&gt;=</span><span class="number">100</span> </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t2 <span class="keyword">where</span> t2.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t2.id<span class="operator">=</span>s.id<span class="number">-1</span>) </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> stadium t3 <span class="keyword">where</span> t3.people<span class="operator">&gt;=</span><span class="number">100</span> <span class="keyword">and</span> t3.id<span class="operator">=</span>s.id<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line">) b,</span><br><span class="line">(<span class="keyword">select</span> s.<span class="operator">*</span> <span class="keyword">from</span> stadium s <span class="keyword">where</span> s.people<span class="operator">&gt;=</span><span class="number">100</span>) c</span><br><span class="line"><span class="keyword">where</span> c.id<span class="operator">=</span>b.id<span class="operator">+</span><span class="number">1</span></span><br><span class="line">) x <span class="keyword">order</span> <span class="keyword">by</span> x.id;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-28"><a href="#Submission-Detail-28" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>14 &#x2F; 14 test cases passed.</li>
<li>Your runtime beats 57.13 % of mysql submissions.</li>
</ul>
<h2 id="620-Not-Boring-Movies"><a href="#620-Not-Boring-Movies" class="headerlink" title="620. Not Boring Movies"></a>620. Not Boring Movies</h2><p>这题确实Easy， 可以不假思索地写出SQL，但执行效率还是不够高，而且也查了下MOD函数与mod运算符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cinema <span class="keyword">where</span> id<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> description <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">&#x27;%boring%&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> rating <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-29"><a href="#Submission-Detail-29" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>8 &#x2F; 8 test cases passed.</li>
<li>Your runtime beats 72.39 % of mysql submissions.</li>
</ul>
<h3 id="Submission-Detail-30"><a href="#Submission-Detail-30" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><h2 id="626-Exchange-Seats"><a href="#626-Exchange-Seats" class="headerlink" title="626. Exchange Seats"></a>626. Exchange Seats</h2><p>这题确实Medium，不难，但也不是很简单就能写出，inner join 与 outer join 进行union，执行效率还是不算高。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> t1.id,t2.student <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> seat <span class="keyword">where</span> id<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">1</span>) t1 <span class="keyword">join</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> seat <span class="keyword">where</span> id<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">0</span>) t2 <span class="keyword">on</span> t1.id<span class="operator">=</span>t2.id<span class="number">-1</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> IFNULL(t2.id,t1.id) <span class="keyword">as</span> id,t1.student <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> seat <span class="keyword">where</span> id<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">1</span>) t1 <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> seat <span class="keyword">where</span> id<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">0</span>) t2 <span class="keyword">on</span> t1.id<span class="operator">=</span>t2.id<span class="number">-1</span></span><br><span class="line">) t <span class="keyword">order</span> <span class="keyword">by</span> id;</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-31"><a href="#Submission-Detail-31" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>12 &#x2F; 12 test cases passed.</li>
<li>Your runtime beats 58.11 % of mysql submissions.</li>
</ul>
<h2 id="627-Swap-Salary"><a href="#627-Swap-Salary" class="headerlink" title="627. Swap Salary"></a>627. Swap Salary</h2><p>算是Easy吧，不过还是看了下mysql的update语法，用IF()函数或者 case 都可以。</p>
<h3 id="1-6"><a href="#1-6" class="headerlink" title="1"></a>1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> salary <span class="keyword">set</span> sex<span class="operator">=</span>IF(sex<span class="operator">=</span><span class="string">&#x27;m&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-32"><a href="#Submission-Detail-32" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>8 &#x2F; 8 test cases passed.</li>
<li>Your runtime beats 53.28 % of mysql submissions.</li>
</ul>
<h3 id="2-6"><a href="#2-6" class="headerlink" title="2"></a>2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> salary <span class="keyword">set</span> sex<span class="operator">=</span><span class="keyword">case</span> sex <span class="keyword">when</span> <span class="string">&#x27;m&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;f&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;f&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;m&#x27;</span> <span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="Submission-Detail-33"><a href="#Submission-Detail-33" class="headerlink" title="Submission Detail"></a>Submission Detail</h4><ul>
<li>8 &#x2F; 8 test cases passed.</li>
<li>Your runtime beats 49.22 % of mysql submissions.</li>
</ul>
<hr>
<h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><h2 id="195-Tenth-Line"><a href="#195-Tenth-Line" class="headerlink" title="195. Tenth Line"></a>195. Tenth Line</h2><p>自己对linux shell果然是一无所知，连这个Easy的题也需要google 搜 linux sh read nth line，到 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/6022384/bash-tool-to-get-nth-line-from-a-file">Bash tool to get nth line from a file</a>，原来有个sed命令可以很简单地实现读第n行，此题存在一题多解，需要举一反三</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">&#x27;10q;d&#x27;</span> <span class="string">&#x27;file.txt&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-34"><a href="#Submission-Detail-34" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>7 &#x2F; 7 test cases passed.</li>
</ul>
<h2 id="193-Valid-Phone-Numbers"><a href="#193-Valid-Phone-Numbers" class="headerlink" title="193. Valid Phone Numbers"></a>193. Valid Phone Numbers</h2><p>linux shell的题自己本来就不懂，只能从头学起，想也没用，不如google，<code>linux shell regex phone number</code>，直接出来个原题的答案，<a target="_blank" rel="noopener" href="https://helloacm.com/regex-coding-exercise-valid-phone-numbers/">Regex Coding Exercise – Valid Phone Numbers</a>，一个要点是正则表达式，一个要点是Linux的grep命令，学习了。这篇文章里说用 <strong>awk</strong> 或 <strong>sed</strong> 也行。题目要求用1行shell解决，也搜到个 <a target="_blank" rel="noopener" href="http://jiangtao.me/valid-phone-numbers-with-shell-script.html">Valid Phone Numbers with shell script</a> 是用shell 的while及if语句来实现。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">grep -P <span class="string">&quot;^((\([0-9]&#123;3&#125;\) )|([0-9]&#123;3&#125;\-))[0-9]&#123;3&#125;\-[0-9]&#123;4&#125;$&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-35"><a href="#Submission-Detail-35" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>26 &#x2F; 26 test cases passed.</li>
</ul>
<h2 id="192-Word-Frequency"><a href="#192-Word-Frequency" class="headerlink" title="192. Word Frequency"></a>192. Word Frequency</h2><p>这题标为medium，linux shell自己本来就不了解，又有点难度，独立思考不过是浪费时间，不如看看相关专题博客，google关键字linux shell word frequency，搜到 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10552803/how-to-create-a-frequency-list-of-every-word-in-a-file">How to create a frequency list of every word in a file?</a>，参考里面的左试右试总是不太对，又搜到个答案大全 <a target="_blank" rel="noopener" href="https://helloacm.com/shell-coding-exercise-word-frequency/">Shell Coding Exercise – Word Frequency</a>，人家高手一题多解给出N种异曲同工的方法，用了很多linux的内置功能命令比如cat, tr, awk, sed, sort,grep, uniq，自己也看不大懂，又参考评论里的解释改了下，原来是要sort两次，第二次逆序sort，终于运行通过，但效率不高。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -r <span class="string">&#x27;s/\s+/\n/g&#x27;</span> words.txt | grep -v <span class="string">&quot;^$&quot;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -r | awk <span class="string">&#x27;&#123;print $2&quot; &quot;$1&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-36"><a href="#Submission-Detail-36" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>14 &#x2F; 14 test cases passed.</li>
</ul>
<h2 id="194-Transpose-File"><a href="#194-Transpose-File" class="headerlink" title="194. Transpose File"></a>194. Transpose File</h2><p>google关键字shell command transpose，搜到 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1729824/an-efficient-way-to-transpose-a-file-in-bash">An efficient way to transpose a file in Bash</a> ，原来是要用awk写一小段程序，还没看懂，只有慢慢消息理解了。</p>
<p><a target="_blank" rel="noopener" href="http://www.thelinuxrain.com/articles/transposing-rows-and-columns-3-methods">Transposing rows and columns: 3 methods</a> 则提到</p>
<ul>
<li>Transposing rows and columns is indeed easy if you have the GNU <strong>datamash</strong> utility on your system. </li>
<li>The mighty text-processing program <strong>AWK</strong> can also do transposing.</li>
</ul>
<p>对高手来说，方法多得很，殊途同归，条条道路通罗马。</p>
<p>自己的linux shell要学的东西比sql要多得多，sql好歹工作当中经常用，linux shell用得少就处处是问题，形式上先过上一遍，还得慢慢消化理解。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&#123; </span></span><br><span class="line"><span class="string">    for (i=1; i&lt;=NF; i++)  &#123;</span></span><br><span class="line"><span class="string">        a[NR,i] = $i</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">NF&gt;p &#123; p = NF &#125;</span></span><br><span class="line"><span class="string">END &#123;    </span></span><br><span class="line"><span class="string">    for(j=1; j&lt;=p; j++) &#123;</span></span><br><span class="line"><span class="string">        str=a[1,j]</span></span><br><span class="line"><span class="string">        for(i=2; i&lt;=NR; i++)&#123;</span></span><br><span class="line"><span class="string">            str=str&quot; &quot;a[i,j];</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        print str</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<h3 id="Submission-Detail-37"><a href="#Submission-Detail-37" class="headerlink" title="Submission Detail"></a>Submission Detail</h3><ul>
<li>17 &#x2F; 17 test cases passed.</li>
<li>Your runtime beats 11.53 % of bash submissions.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hezhigang.github.io/2018/06/30/LeetCode-Solve-Diary/" data-id="cmf1gcabe006y85yz33g57lfk" data-title="LeetCode解题日志" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/07/10/Spring-Boot-React/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Spring Boot+React.js
        
      </div>
    </a>
  
  
    <a href="/2018/06/29/mysql-points/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">mysql知识点</div>
    </a>
  
</nav>

  
</article>




<script src="https://utteranc.es/client.js"
        repo="hezhigang/hezhigang.github.io"
        issue-term="pathname"
        label="utterances"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithms/" rel="tag">Algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELL/" rel="tag">ELL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PhraseList/" rel="tag">PhraseList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TED/" rel="tag">TED</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TED-Ed/" rel="tag">TED-Ed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/The-Story-of-Maths/" rel="tag">The Story of Maths</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordList/" rel="tag">WordList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/" rel="tag">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/miscellaneous/" rel="tag">miscellaneous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/poem/" rel="tag">poem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%A4%E5%85%B8%E6%96%87%E5%AD%A6/" rel="tag">古典文学</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithms/" style="font-size: 12.67px;">Algorithms</a> <a href="/tags/ELL/" style="font-size: 19.33px;">ELL</a> <a href="/tags/English/" style="font-size: 18px;">English</a> <a href="/tags/LeetCode/" style="font-size: 20px;">LeetCode</a> <a href="/tags/PhraseList/" style="font-size: 14.67px;">PhraseList</a> <a href="/tags/TED/" style="font-size: 16px;">TED</a> <a href="/tags/TED-Ed/" style="font-size: 13.33px;">TED-Ed</a> <a href="/tags/The-Story-of-Maths/" style="font-size: 11.33px;">The Story of Maths</a> <a href="/tags/WordList/" style="font-size: 17.33px;">WordList</a> <a href="/tags/git/" style="font-size: 10.67px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/math/" style="font-size: 14px;">math</a> <a href="/tags/miscellaneous/" style="font-size: 16.67px;">miscellaneous</a> <a href="/tags/poem/" style="font-size: 18.67px;">poem</a> <a href="/tags/%E5%85%B6%E4%BB%96/" style="font-size: 15.33px;">其他</a> <a href="/tags/%E5%8F%A4%E5%85%B8%E6%96%87%E5%AD%A6/" style="font-size: 12px;">古典文学</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">August 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">July 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">June 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">May 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">April 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">January 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/08/26/Education-without-books-Julius-Lips/">Education</a>
          </li>
        
          <li>
            <a href="/2025/08/08/My-English-Phrases-List-Aug-2025/">My English Phrases List - August - 2025</a>
          </li>
        
          <li>
            <a href="/2025/08/01/My-English-Words-List-Aug-2025/">My English Words List - August - 2025</a>
          </li>
        
          <li>
            <a href="/2025/07/30/esl-notes-1/">ESL Notes - 1</a>
          </li>
        
          <li>
            <a href="/2025/07/18/quotes-1/">Quotes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 hezhigang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>